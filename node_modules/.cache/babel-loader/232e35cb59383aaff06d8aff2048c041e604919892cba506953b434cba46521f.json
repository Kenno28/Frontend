{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Button,Container,Nav,Navbar}from\"react-bootstrap\";import{LinkContainer}from\"react-router-bootstrap\";import'../CSS/PageIndex.css';import LoginDialog from\"./LoginDialog\";import{useLoginContext,useShowLoginContext}from\"./Context\";import{logout,roleOfUser}from\"../backend/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function NavBar(){const[isOpen,setIsOpen]=useState(false);const[isLogin,setLogin]=useState(undefined);const[isUserAdmin,setAdmin]=useState(false);//Schauen nach, ob der Bentuzer Admin ist.\nconst{loginInfo,setLoginInfo}=useLoginContext();const{showLogin}=useShowLoginContext();async function logOff(){await logout();setLoginInfo(false);setLogin(false);}useEffect(()=>{let rol={role:'a'};async function checkAdmin(){if(loginInfo){if(!roleOfUser){return;}if(roleOfUser===rol.role){setAdmin(true);}else{setAdmin(false);}}}checkAdmin();},[loginInfo]);return/*#__PURE__*/_jsx(_Fragment,{children:showLogin&&/*#__PURE__*/_jsx(Navbar,{className:\"navbar\",\"data-bs-theme\":\"dark\",children:/*#__PURE__*/_jsxs(Container,{className:\"inh\",children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:\"\\xDCbersicht\"})}),/*#__PURE__*/_jsx(Button,{className:\"hamburger\",onClick:()=>setIsOpen(!isOpen),children:/*#__PURE__*/_jsx(\"img\",{className:\"hamburger\",src:\"/hmaburgermenu.png\",alt:\"Menu\"})}),/*#__PURE__*/_jsxs(Nav,{className:\"me-auto \".concat(isOpen?'open':''),children:[!loginInfo&&/*#__PURE__*/_jsx(Nav.Link,{onClick:()=>setLogin(true),children:\"Login\"}),\" \",isLogin&&/*#__PURE__*/_jsx(LoginDialog,{isOpen:true,setLogin:setLogin}),loginInfo&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/\",children:/*#__PURE__*/_jsx(Nav.Link,{onClick:logOff,children:\" Logout\"})}),\" \",isUserAdmin&&loginInfo&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Admin\"})}),\"    \",loginInfo&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/prefs\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Prefs\"})}),\"    \",loginInfo&&/*#__PURE__*/_jsx(LinkContainer,{to:\"/protokoll/neu\",children:/*#__PURE__*/_jsx(Nav.Link,{children:\"Neues Protokoll\"})})]})]})})});}export default NavBar;","map":{"version":3,"names":["useEffect","useState","Button","Container","Nav","Navbar","LinkContainer","LoginDialog","useLoginContext","useShowLoginContext","logout","roleOfUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavBar","isOpen","setIsOpen","isLogin","setLogin","undefined","isUserAdmin","setAdmin","loginInfo","setLoginInfo","showLogin","logOff","rol","role","checkAdmin","children","className","to","Brand","onClick","src","alt","concat","Link"],"sources":["C:/Users/erayz/Dropbox/Semester 3/Web II/we2.blatt12/src/components/Login.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Button, Container,  Nav,  Navbar } from \"react-bootstrap\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport '../CSS/PageIndex.css';\r\nimport LoginDialog, { Role } from \"./LoginDialog\";\r\nimport {  useLoginContext, useShowLoginContext } from \"./Context\";\r\nimport {  logout, roleOfUser } from \"../backend/api\";\r\n\r\n\r\n\r\n\r\n\r\nfunction NavBar( ) {\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n  const [isLogin, setLogin] = useState<boolean | undefined>(undefined);\r\n  const [isUserAdmin, setAdmin] = useState(false); //Schauen nach, ob der Bentuzer Admin ist.\r\n  const { loginInfo, setLoginInfo } = useLoginContext();\r\n  const {showLogin } = useShowLoginContext();\r\n \r\n\r\n  async function logOff(){\r\n    await logout();\r\n    setLoginInfo(false);\r\n    setLogin(false);\r\n  }\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    let rol: Role = {role: 'a'};\r\n    async function checkAdmin() {\r\n    if(loginInfo){\r\n        if(!roleOfUser){\r\n          return;\r\n        }  \r\n        if(roleOfUser === rol.role){\r\n              setAdmin(true);\r\n          }else{\r\n            setAdmin(false)\r\n        }\r\n      }\r\n    } checkAdmin()\r\n  }, [loginInfo])\r\n\r\n\r\n\r\n  return (\r\n      <>{ showLogin && \r\n        <Navbar className=\"navbar\" data-bs-theme=\"dark\">\r\n          <Container className=\"inh\">\r\n            <LinkContainer to=\"/\">\r\n              <Navbar.Brand>Ãœbersicht</Navbar.Brand>\r\n                </LinkContainer>\r\n                <Button className=\"hamburger\" onClick={() => setIsOpen(!isOpen)}>\r\n                 <img className=\"hamburger\" src=\"/hmaburgermenu.png\" alt=\"Menu\" />\r\n                </Button>\r\n\r\n                <Nav className={`me-auto ${isOpen ? 'open' : ''}`}>\r\n                        {(!loginInfo)  && <Nav.Link onClick={() =>  setLogin(true)}>Login</Nav.Link>} {/*Wenn man nicht eingeloggt ist, soll das hier angezeigt werden. */}\r\n  \r\n                        {isLogin && <LoginDialog isOpen={true} setLogin={setLogin}/>}\r\n\r\n                        {loginInfo &&  <LinkContainer to=\"/\">\r\n                         <Nav.Link onClick={logOff}> Logout</Nav.Link>\r\n                         </LinkContainer>\r\n                        } {/*Wenn man eingeloggt ist, soll das hier angezeigt werden. */}\r\n\r\n                        {isUserAdmin && loginInfo  && <LinkContainer to=\"/admin\">\r\n                                           <Nav.Link>Admin</Nav.Link>\r\n                                       </LinkContainer> }    {/*Wenn man eingeloggt und Admin ist, soll das hier angezeigt werden. */}\r\n                        {loginInfo && <LinkContainer to=\"/prefs\">\r\n                                         <Nav.Link>Prefs</Nav.Link>  \r\n                                      </LinkContainer>}    {/*Wenn man eingeloggt ist, soll das hier angezeigt werden. */}\r\n\r\n                  {loginInfo && <LinkContainer to=\"/protokoll/neu\">\r\n                          <Nav.Link>Neues Protokoll</Nav.Link> \r\n                        </LinkContainer>} \r\n                </Nav>\r\n          </Container>\r\n        </Navbar> }\r\n    </>\r\n  );\r\n}\r\n  \r\nexport default NavBar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}