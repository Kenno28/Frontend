{"ast":null,"code":"import{useEffect,useState}from\"react\";import{createEitnrag}from\"../backend/api\";import{LinkContainer}from\"react-router-bootstrap\";import{Button}from\"react-bootstrap\";import{useLoginContext}from\"./Context\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function PageCreateEintrag(){const params=useParams();const protokollId=params.protokollId;const{loginInfo}=useLoginContext();const[validationErrors,setValidationErrors]=useState({});/// zum Validieren\nconst[getEintrag,setEintrag]=useState({getraenk:\"\",menge:0,kommentar:\"\",ersteller:\"\",protokoll:\"\"});useEffect(()=>{if(loginInfo&&protokollId){setEintrag(prevState=>({...prevState,ersteller:loginInfo.userId,protokoll:protokollId}));}},[loginInfo,protokollId]);async function create(ein){try{await createEitnrag(ein);}catch(e){}}function update(e){return setEintrag({...getEintrag,[e.target.name]:e.target.value});}function validate(e){var _getEintrag$kommentar;switch(e.target.name){case\"getraenk\":let isValidName=e.target.value.length>3;let isValidLength=e.target.value.length<100;setValidationErrors({...validationErrors,getraenk:!isValidName||!isValidLength?\"Der Name des Patients muss mindestens 3 Buchstaben sein\":undefined});break;case\"menge\":setValidationErrors({...validationErrors,menge:0>=(getEintrag===null||getEintrag===void 0?void 0:getEintrag.menge)||getEintrag.menge>=1000?\"Es muss zwischen 0 und 1000 sein!\":undefined});break;case\"kommentar\":if(getEintrag.kommentar&&((_getEintrag$kommentar=getEintrag.kommentar)===null||_getEintrag$kommentar===void 0?void 0:_getEintrag$kommentar.length)>0){var _getEintrag$kommentar2,_getEintrag$kommentar3;setValidationErrors({...validationErrors,kommentar:3>((_getEintrag$kommentar2=getEintrag.kommentar)===null||_getEintrag$kommentar2===void 0?void 0:_getEintrag$kommentar2.length)||((_getEintrag$kommentar3=getEintrag.kommentar)===null||_getEintrag$kommentar3===void 0?void 0:_getEintrag$kommentar3.length)>1000?\"Es muss zwischen 3 und 1000 sein!\":undefined});}else{setValidationErrors({...validationErrors,kommentar:\"\"});}break;}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Eintrag Erstellen\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:()=>create(getEintrag),children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Getr\\xE4nk:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"getraenk\",value:getEintrag.getraenk,onChange:update,onBlur:validate,className:validationErrors.getraenk?\"InputError\":\"InputOK\"}),/*#__PURE__*/_jsx(\"small\",{className:\"ValidatError\",children:validationErrors.getraenk})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Menge:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"menge\",value:getEintrag.menge,onChange:update,onBlur:validate,className:validationErrors.menge?\"InputError\":\"InputOK\"}),/*#__PURE__*/_jsx(\"small\",{className:\"ValidatError\",children:validationErrors.menge})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Kommentar:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"kommentar\",value:getEintrag.kommentar,onChange:update,onBlur:validate,className:validationErrors.kommentar?\"InputError\":\"InputOK\"}),/*#__PURE__*/_jsx(\"small\",{className:\"ValidatError\",children:validationErrors.kommentar})]})]}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/protokoll/\".concat(protokollId),children:/*#__PURE__*/_jsx(Button,{className:\"But\",variant:\"secondary\",children:\"Abbrechen\"})}),/*#__PURE__*/_jsx(LinkContainer,{to:\"/protokoll/\".concat(protokollId),children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"But\",onClick:()=>create(getEintrag),children:\"Speichern\"})})]});}","map":{"version":3,"names":["useEffect","useState","createEitnrag","LinkContainer","Button","useLoginContext","useParams","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PageCreateEintrag","params","protokollId","loginInfo","validationErrors","setValidationErrors","getEintrag","setEintrag","getraenk","menge","kommentar","ersteller","protokoll","prevState","userId","create","ein","e","update","target","name","value","validate","_getEintrag$kommentar","isValidName","length","isValidLength","undefined","_getEintrag$kommentar2","_getEintrag$kommentar3","children","onSubmit","className","type","onChange","onBlur","to","concat","variant","onClick"],"sources":["C:/Users/erayz/Dropbox/Semester 3/Web II/we2.blatt12/src/components/PageCreateEintrag.tsx"],"sourcesContent":["import { ChangeEvent, useEffect, useState } from \"react\"\r\nimport { EintragResource } from \"../Resources\"\r\nimport { createEitnrag } from \"../backend/api\"\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport { useLoginContext } from \"./Context\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\ntype ValidationMessages<Type> = {\r\n    [Property in keyof Type]?: string;\r\n};\r\n\r\n\r\nexport default function PageCreateEintrag(){\r\n\r\n    \r\n    const params = useParams();\r\n    const protokollId = params.protokollId;\r\n\r\n\r\n    const { loginInfo} = useLoginContext();\r\n \r\n    const [validationErrors, setValidationErrors] = useState<ValidationMessages<EintragResource>>({}); /// zum Validieren\r\n    const [getEintrag, setEintrag] = useState<EintragResource>({\r\n        getraenk: \"\",\r\n        menge: 0,\r\n        kommentar: \"\",\r\n        ersteller: \"\",\r\n        protokoll: \"\"\r\n    })\r\n\r\n    useEffect(() => {\r\n        if(loginInfo && protokollId){\r\n            setEintrag(prevState => ({\r\n                ...prevState,\r\n                ersteller: loginInfo.userId,\r\n                protokoll: protokollId\r\n            }));\r\n        }\r\n    }, [loginInfo, protokollId]);\r\n\r\n   \r\n\r\n    async function create(ein: EintragResource){\r\n       try{\r\n        await createEitnrag(ein);\r\n        }catch(e){\r\n\r\n       }\r\n    }\r\n\r\n    function update(e: ChangeEvent<HTMLInputElement | HTMLSelectElement>){\r\n\r\n       return setEintrag({...getEintrag, [e.target.name]: e.target.value});\r\n      \r\n    }\r\n\r\n    function validate(e: React.FocusEvent<HTMLInputElement>) {\r\n        switch (e.target.name) {\r\n            case \"getraenk\": \r\n                let isValidName = e.target.value.length > 3;\r\n                let isValidLength = e.target.value.length < 100;\r\n                setValidationErrors({\r\n                ...validationErrors,\r\n                    getraenk: (!isValidName || !isValidLength)\r\n                    ? \"Der Name des Patients muss mindestens 3 Buchstaben sein\" : undefined\r\n              }); \r\n            break;\r\n            case \"menge\": \r\n            setValidationErrors({\r\n                    ...validationErrors,\r\n                    menge: (0 >= getEintrag?.menge! || getEintrag!.menge >= 1000)\r\n                    ? \"Es muss zwischen 0 und 1000 sein!\"  : undefined\r\n                }); \r\n            break;\r\n            case \"kommentar\": \r\n            if(getEintrag.kommentar && getEintrag.kommentar?.length > 0){\r\n                setValidationErrors({\r\n                    ...validationErrors,\r\n                    kommentar: 3 > getEintrag.kommentar?.length! || getEintrag.kommentar?.length! > 1000\r\n                    ? \"Es muss zwischen 3 und 1000 sein!\"  : undefined\r\n                }); \r\n            } else{\r\n                setValidationErrors({\r\n                    ...validationErrors,\r\n                    kommentar: \"\"  \r\n                }); \r\n            }\r\n            break;\r\n        } \r\n    }\r\n\r\n\r\n\r\n    return(\r\n        <>\r\n        <h1>Eintrag Erstellen</h1>\r\n        \r\n        <form onSubmit={() => create(getEintrag)}>\r\n            <label className=\"form-label\">\r\n                Getr√§nk:\r\n                <input type=\"text\" name=\"getraenk\"  value={getEintrag.getraenk}  onChange={update} onBlur={validate} className={validationErrors.getraenk ? \"InputError\" : \"InputOK\"} />\r\n                <small className='ValidatError'>{validationErrors.getraenk}</small>\r\n            </label>\r\n            <label className=\"form-label\">\r\n                Menge:\r\n                <input type=\"number\" name=\"menge\" value={getEintrag.menge}  onChange={update} onBlur={validate} className={validationErrors.menge ? \"InputError\" : \"InputOK\"}/> \r\n                <small className='ValidatError'>{validationErrors.menge}</small>\r\n            </label>\r\n            <label className=\"form-label\">\r\n                Kommentar:\r\n                <input type=\"text\" name=\"kommentar\" value={getEintrag.kommentar}  onChange={update} onBlur={validate} className={validationErrors.kommentar ? \"InputError\" : \"InputOK\"}/> \r\n                <small className='ValidatError'>{validationErrors.kommentar}</small>\r\n            </label>\r\n           \r\n        </form>\r\n        <LinkContainer to={`/protokoll/${protokollId}`}>\r\n        <Button className=\"But\" variant=\"secondary\" >\r\n          Abbrechen\r\n          </Button>\r\n          </LinkContainer>\r\n          \r\n          <LinkContainer to={`/protokoll/${protokollId}`}>\r\n          <Button variant=\"primary\" className=\"But\" onClick = {() => create(getEintrag!)}>Speichern</Button>\r\n          </LinkContainer>\r\n      \r\n        </>\r\n        )\r\n    \r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}