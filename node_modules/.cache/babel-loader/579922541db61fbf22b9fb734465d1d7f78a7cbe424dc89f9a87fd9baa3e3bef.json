{"ast":null,"code":"import{useState}from\"react\";import{Alert,Button,Modal}from\"react-bootstrap\";import{getLogin}from\"../backend/api\";import{useLoginContext}from\"./Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function getData(data){if(data===false){return false;}return{userId:data.id};}export default function LoginDialog(props){const[show,setShow]=useState(props.isOpen);//Für das login dialog\nconst[alert,setAlert]=useState({show:false,message:\"\"});//Wenn Benutzername oder so falsch ist soll man das machen\nconst handleClose=()=>props.setLogin(false);const[name,setName]=useState(\"\");// UseState für Name\nconst[password,setPassword]=useState(\"\");//UseState für Password\nconst{loginInfo,setLoginInfo}=useLoginContext();async function load(name,password){try{const loginRes=await getLogin(name,password);const a=getData(loginRes);setLoginInfo(a);setShow(false);}catch(err){setAlert({show:true,message:\"Fehler beim Login. Bitte überprüfen Sie Ihre Anmeldedaten.\"});}}return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,backdrop:\"static\",keyboard:false,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Login\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"SimpleFormDemo\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Name\",value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Passwort:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"Passwort\",value:password,onChange:e=>setPassword(e.target.value)})]})]})})}),alert.show&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:alert.message}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Abbrechen\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>load(name,password),children:\"OK\"})]})]});}","map":{"version":3,"names":["useState","Alert","Button","Modal","getLogin","useLoginContext","jsx","_jsx","jsxs","_jsxs","getData","data","userId","id","LoginDialog","props","show","setShow","isOpen","alert","setAlert","message","handleClose","setLogin","name","setName","password","setPassword","loginInfo","setLoginInfo","load","loginRes","a","err","onHide","backdrop","keyboard","children","Header","closeButton","Title","Body","className","type","value","onChange","e","target","variant","Footer","onClick"],"sources":["C:/Users/erayz/Dropbox/Semester 3/Web II/we2.blatt12/src/components/LoginDialog.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Alert, Button, Modal } from \"react-bootstrap\";\nimport {  getLogin } from \"../backend/api\";\nimport { LoginResource } from \"../Resources\";\nimport { LoginInfo, useLoginContext } from \"./Context\";\n\n\nexport function getData(data : (LoginResource | false)): LoginInfo | false{\n  \n  if(data === false){\n    return false;\n  }\n  return{ userId: data.id };\n}\nexport interface Role{\n  role: \"a\" | \"u\";\n}\n\n\n\nexport default function LoginDialog(props: {isOpen:boolean, setLogin:(value: boolean) => void}){\n\n    const [show, setShow] = useState(props.isOpen); //Für das login dialog\n    const [alert, setAlert] = useState({ show: false, message: \"\" }); //Wenn Benutzername oder so falsch ist soll man das machen\n    const handleClose = () => props.setLogin(false);\n    const [name, setName] = useState( \"\" ); // UseState für Name\n    const [password, setPassword] = useState( \"\" ); //UseState für Password\n    const { loginInfo, setLoginInfo } = useLoginContext();\n\n\n\n    async function load(name:string, password:string) {\n      try{\n  \n        const loginRes = await getLogin(name, password);\n        const a = getData(loginRes);\n        setLoginInfo(a)\n        setShow(false);\n      } catch(err){\n        setAlert({\n          show: true,\n          message: \"Fehler beim Login. Bitte überprüfen Sie Ihre Anmeldedaten.\"\n        });\n      }\n    } \n\n    return(\n        <Modal\n        show={show}\n        onHide={handleClose}\n        backdrop=\"static\"\n        keyboard={false}\n        >\n        <Modal.Header closeButton>\n          <Modal.Title>Login</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n        \n              <form >\n                <div className=\"SimpleFormDemo\">\n                  <label>\n                         Name:\n                        <input type=\"text\" name=\"Name\" value={name} onChange={e => setName(e.target.value)} />\n                  </label>\n                  <label>\n                         Passwort:\n                        <input type=\"password\" name=\"Passwort\" value={password} onChange={e => setPassword(e.target.value)}/>\n                  </label>\n                </div>\n                </form>\n        </Modal.Body>\n        {alert.show && <Alert variant=\"danger\">{alert.message}</Alert>}\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>\n          Abbrechen\n          </Button>\n          <Button variant=\"primary\" onClick = {() => load(name, password)}>OK</Button>\n        </Modal.Footer>\n    \n      </Modal>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}